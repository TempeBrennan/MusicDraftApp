<!DOCTYPE html>
<html lang="zh-cn">

<head>
  <meta charset="UTF-8" />
  <title>🎵 简谱 → MusicXML 可视编辑器</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <header>
    🎵 曲名：
    <input id="titleInput" type="text" placeholder="请输入曲名" value="我的第一首歌曲" style="width:180px;">
    原唱：
    <input id="composerInput" type="text" placeholder="某歌手" value="某歌手" style="width:140px;">

    <button id="btnNewMeasure">➕ 添加小节</button>
    <button id="btnExportMXL">📦 导出 MXL</button>
  </header>

  <div id="main">
    <!-- 左侧面板 -->
    <div id="note-palette">
      <h4>🎵 音符面板</h4>
      <button id="addNoteBtn">添加音符到当前小节</button>
      <div id="palette-tones">
        <button class="tone" data-step="C">1</button>
        <button class="tone" data-step="D">2</button>
        <button class="tone" data-step="E">3</button>
        <button class="tone" data-step="F">4</button>
        <button class="tone" data-step="G">5</button>
        <button class="tone" data-step="A">6</button>
        <button class="tone" data-step="B">7</button>
        <button id="restBtn">休</button>
      </div>

      <fieldset>
        <legend>升降号</legend>
        <label><input type="radio" name="alter" value="0" checked> ♮</label>
        <label><input type="radio" name="alter" value="1"> ♯</label>
        <label><input type="radio" name="alter" value="-1"> ♭</label>
      </fieldset>

      <fieldset>
        <legend>八度</legend>
        <label><input type="radio" name="octave" value="3"> 3</label>
        <label><input type="radio" name="octave" value="4" checked> 4</label>
        <label><input type="radio" name="octave" value="5"> 5</label>
      </fieldset>

      <fieldset>
        <legend>八度升降</legend>
        <label><input type="radio" name="octaveShift" value="0" checked> 不变</label>
        <label><input type="radio" name="octaveShift" value="1"> 升八度●</label>
        <label><input type="radio" name="octaveShift" value="-1"> 降八度●</label>
      </fieldset>

      <fieldset>
        <legend>时值</legend>
        <label><input type="radio" name="duration" value="1"> 八分</label>
        <label><input type="radio" name="duration" value="2" checked> 四分</label>
        <label><input type="radio" name="duration" value="4"> 二分</label>
        <label><input type="radio" name="duration" value="8"> 全音符</label>
      </fieldset>

      <fieldset>
        <legend>附点</legend>
        <label><input type="radio" name="dotted" value="0" checked> 无</label>
        <label><input type="radio" name="dotted" value="1"> 附点·</label>
      </fieldset>

    </div>

    <!-- 中间展示 -->
    <div id="score-area"></div>

    <!-- 右侧属性窗 -->
    <div id="note-editor">
      <h4>🎚️ 音符属性</h4>
      <div id="noSelection">点击音符以编辑属性。</div>

      <div id="editorForm" style="display:none;">
        <fieldset>
          <legend>音名</legend>
          <label><input type="radio" name="editStep" value="C"> C</label>
          <label><input type="radio" name="editStep" value="D"> D</label>
          <label><input type="radio" name="editStep" value="E"> E</label>
          <label><input type="radio" name="editStep" value="F"> F</label>
          <label><input type="radio" name="editStep" value="G"> G</label>
          <label><input type="radio" name="editStep" value="A"> A</label>
          <label><input type="radio" name="editStep" value="B"> B</label>
        </fieldset>
        
        <fieldset>
          <legend>升降号</legend>
          <label><input type="radio" name="editAlter" value="0"> ♮</label>
          <label><input type="radio" name="editAlter" value="1"> ♯</label>
          <label><input type="radio" name="editAlter" value="-1"> ♭</label>
        </fieldset>
        
        <fieldset>
          <legend>八度</legend>
          <label><input type="radio" name="editOctave" value="3"> 3</label>
          <label><input type="radio" name="editOctave" value="4"> 4</label>
          <label><input type="radio" name="editOctave" value="5"> 5</label>
        </fieldset>
        
        <fieldset>
          <legend>八度升降</legend>
          <label><input type="radio" name="editOctaveShift" value="0"> 不变</label>
          <label><input type="radio" name="editOctaveShift" value="1"> 升八度●</label>
          <label><input type="radio" name="editOctaveShift" value="-1"> 降八度●</label>
        </fieldset>
        
        <fieldset>
          <legend>时值</legend>
          <label><input type="radio" name="editDur" value="1"> 八分</label>
          <label><input type="radio" name="editDur" value="2"> 四分</label>
          <label><input type="radio" name="editDur" value="4"> 二分</label>
          <label><input type="radio" name="editDur" value="8"> 全音符</label>
        </fieldset>
        
        <fieldset>
          <legend>附点</legend>
          <label><input type="radio" name="editDotted" value="0"> 无</label>
          <label><input type="radio" name="editDotted" value="1"> 附点·</label>
        </fieldset>
        
        <fieldset>
          <legend>连音</legend>
          <label><input type="radio" name="editSlur" value=""> 无</label>
          <label><input type="radio" name="editSlur" value="start"> start</label>
          <label><input type="radio" name="editSlur" value="stop"> stop</label>
        </fieldset>
        
        <fieldset>
          <legend>Beam</legend>
          <label><input type="radio" name="editBeam" value=""> 无</label>
          <label><input type="radio" name="editBeam" value="begin"> begin</label>
          <label><input type="radio" name="editBeam" value="continue"> continue</label>
          <label><input type="radio" name="editBeam" value="end"> end</label>
        </fieldset>
        
        <button id="updateNote">更新音符</button>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>

</html>